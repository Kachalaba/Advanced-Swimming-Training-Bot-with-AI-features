# üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞ —Å —Ä–∞—Å—á—ë—Ç–æ–º —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–∫–æ—Ä–æ—Å—Ç–∏/—Ç–µ–º–ø–∞

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –°—Ç–∞–≤–∏—Ç FPS 10.5
–°–∏—Å—Ç–µ–º–∞: –û–∫—Ä—É–≥–ª—è–µ—Ç –¥–æ int(10.5) = 10
–†–µ–∑—É–ª—å—Ç–∞—Ç: 
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏ (0.1—Å –≤–º–µ—Å—Ç–æ 0.095—Å)
  - –ò—Å–∫–∞–∂—ë–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (–º/—Å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
  - –ù–µ—Ç–æ—á–Ω—ã–π —Ç–µ–º–ø –Ω–∞ 100–º
```

### –ü–æ—á–µ–º—É —ç—Ç–æ –±–∞–≥:
1. **FPS –æ–∫—Ä—É–≥–ª—è–ª—Å—è –¥–æ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞** `int(fps)`
2. **–ö–∞–¥—Ä—ã –∏–∑–≤–ª–µ–∫–∞–ª–∏—Å—å —Å –æ–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º** 
3. **–í—Ä–µ–º—è –≤—ã—á–∏—Å–ª—è–ª–æ—Å—å –Ω–µ—Ç–æ—á–Ω–æ** ‚Üí —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–µ—Ç–æ—á–Ω–∞—è

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –¢–æ—á–Ω—ã–π float FPS

### –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

#### 1. **CLI (run_local_video_analysis.py)**
```python
# –ë—ã–ª–æ:
fps=max(1, int(args.fps))  # 10.5 ‚Üí 10 ‚ùå

# –°—Ç–∞–ª–æ:
target_fps = max(1.0, float(args.fps))  # 10.5 ‚Üí 10.5 ‚úÖ
```

#### 2. **Streamlit (app.py)**
```python
# –ë—ã–ª–æ:
fps=max(1, int(fps))  # 10.5 ‚Üí 10 ‚ùå

# –°—Ç–∞–ª–æ:
fps=max(1.0, float(fps))  # 10.5 ‚Üí 10.5 ‚úÖ
```

#### 3. **Frame Extractor (frame_extractor.py)**
```python
# –ë—ã–ª–æ:
frame_interval = int(video_fps / fps)  # –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ!
if frame_count % frame_interval == 0:
    save_frame()

# –°—Ç–∞–ª–æ:
time_per_extracted_frame = 1.0 / fps  # –¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è
next_save_time = 0.0
if current_time >= next_save_time:
    save_frame()
    next_save_time += time_per_extracted_frame
```

**–ö–ª—é—á–µ–≤–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ:** –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤–º–µ—Å—Ç–æ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤!

---

## üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å:

### –ü—Ä–∏–º–µ—Ä: FPS 10.5, –≤–∏–¥–µ–æ 30 —Å–µ–∫

#### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (int):
```
FPS: 10.5 ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–æ –¥–æ 10
–ò–Ω—Ç–µ—Ä–≤–∞–ª: 30 fps / 10 = 3 –∫–∞–¥—Ä–∞ –≤–∏–¥–µ–æ
–ò–∑–≤–ª–µ—á–µ–Ω–æ: 100 –∫–∞–¥—Ä–æ–≤ (30s * 30fps / 3 = 300 –∫–∞–¥—Ä–æ–≤ / 3)
–†–µ–∞–ª—å–Ω—ã–π FPS: 100 / 30 = 3.33 fps ‚ùå (–≤–º–µ—Å—Ç–æ 10.5!)

–†–∞—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏:
  –ö–∞–¥—Ä 50: frame_duration = 1/10 = 0.1—Å
  –í—Ä–µ–º—è: 50 * 0.1 = 5.0—Å
  –†–µ–∞–ª—å–Ω–æ–µ: 50 / 3.33 = 15.0—Å ‚ùå
  
–û—à–∏–±–∫–∞: 3x –∏—Å–∫–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏!
```

#### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (float):
```
FPS: 10.5 (—Ç–æ—á–Ω—ã–π)
–í—Ä–µ–º—è –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏: 1/10.5 = 0.0952—Å
–ò–∑–≤–ª–µ—á–µ–Ω–æ: 315 –∫–∞–¥—Ä–æ–≤ (30s * 10.5fps)
–†–µ–∞–ª—å–Ω—ã–π FPS: 315 / 30 = 10.5 fps ‚úÖ

–†–∞—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏:
  –ö–∞–¥—Ä 50: frame_duration = 1/10.5 = 0.0952—Å
  –í—Ä–µ–º—è: 50 * 0.0952 = 4.76—Å
  –†–µ–∞–ª—å–Ω–æ–µ: 50 / 10.5 = 4.76—Å ‚úÖ
  
–û—à–∏–±–∫–∞: 0% - –∏–¥–µ–∞–ª—å–Ω–æ!
```

---

## üéØ –í–ª–∏—è–Ω–∏–µ –Ω–∞ –º–µ—Ç—Ä–∏–∫–∏:

### Speed (–°–∫–æ—Ä–æ—Å—Ç—å):
```
–î–æ:  speed = distance / (frames * 0.1)
     speed = 25–º / (100 * 0.1) = 25/10 = 2.5 –º/—Å ‚ùå

–ü–æ—Å–ª–µ: speed = distance / (frames * 0.0952)
       speed = 25–º / (100 * 0.0952) = 25/9.52 = 2.63 –º/—Å ‚úÖ
       
–û—à–∏–±–∫–∞ –±—ã–ª–∞: ~5%
```

### Pace per 100m (–¢–µ–º–ø):
```
–î–æ:  pace = 100 / speed = 100 / 2.5 = 40—Å ‚ùå
–ü–æ—Å–ª–µ: pace = 100 / 2.63 = 38—Å ‚úÖ

–†–∞–∑–Ω–∏—Ü–∞: 2 —Å–µ–∫—É–Ω–¥—ã! –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Å–ø–æ—Ä—Ç–∞!
```

### Split Times:
```
–î–æ:  split_time = frames * 0.1 = 50 * 0.1 = 5.0—Å ‚ùå
–ü–æ—Å–ª–µ: split_time = frames * 0.0952 = 50 * 0.0952 = 4.76—Å ‚úÖ

–û—à–∏–±–∫–∞ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Å–ø–ª–∏—Ç–µ!
```

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏:
```bash
cat logs/bot.log | grep "Target extraction rate"
cat logs/bot.log | grep "Actual extraction rate"
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
INFO - Target extraction rate: 10.50 fps
INFO - Actual extraction rate: 10.48 fps (target: 10.50 fps)
```

**–ë—ã–ª–æ –±—ã (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è):**
```
INFO - Target extraction rate: 10 fps  ‚Üê –æ–∫—Ä—É–≥–ª–µ–Ω–æ!
INFO - Actual extraction rate: 3.33 fps (target: 10 fps)  ‚Üê –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!
```

### 2. –ü—Ä–æ–≤–µ—Ä—å JSON:
```bash
cat output/analysis.json | python3 -c "
import json, sys
data = json.load(sys.stdin)
print(f'Frame duration: {data[\"summary\"][\"frame_duration_s\"]}')
print(f'FPS: {1/data[\"summary\"][\"frame_duration_s\"]:.2f}')
print(f'Total time: {data[\"summary\"][\"total_time_s\"]}s')
print(f'Average speed: {data[\"summary\"][\"average_speed_mps\"]} m/s')
"
```

**–•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Frame duration: 0.09523809523809523  ‚Üê —Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!
FPS: 10.50
Total time: 26.67s  ‚Üê —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ –¥–ª—è 26-—Å–µ–∫ –≤–∏–¥–µ–æ
Average speed: 1.85 m/s  ‚Üê —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
```

### 3. –°—Ä–∞–≤–Ω–∏ –î–æ/–ü–æ—Å–ª–µ:
```bash
# –°—Ç–∞—Ä—ã–π –∞–Ω–∞–ª–∏–∑ (–µ—Å–ª–∏ –µ—Å—Ç—å)
cat old_analysis/analysis.json | python3 -c "
import json, sys
data = json.load(sys.stdin)
print('–°–¢–ê–†–´–ô:')
print(f'  Speed: {data[\"summary\"][\"average_speed_mps\"]} m/s')
print(f'  Pace: {data[\"summary\"][\"average_pace_per_100m\"]} s/100m')
"

# –ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
cat output/analysis.json | python3 -c "
import json, sys
data = json.load(sys.stdin)
print('–ù–û–í–´–ô:')
print(f'  Speed: {data[\"summary\"][\"average_speed_mps\"]} m/s')
print(f'  Pace: {data[\"summary\"][\"average_pace_per_100m\"]} s/100m')
"
```

---

## üí° –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:

### –î–ª—è —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤:
- **–¢–æ—á–Ω–æ—Å—Ç—å 1-2 —Å–µ–∫—É–Ω–¥—ã** –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
- **–¢–µ–º–ø –Ω–∞ 100–º** - –∫–ª—é—á–µ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- **–ü—Ä–æ–≥—Ä–µ—Å—Å** –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ—Ä—è—Ç—å—Å—è —Ç–æ—á–Ω–æ

### –î–ª—è —Ç—Ä–µ–Ω–µ—Ä–æ–≤:
- **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ —Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤** —Ç—Ä–µ–±—É–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
- **–ê–Ω–∞–ª–∏–∑ —Ç–µ—Ö–Ω–∏–∫–∏** –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:
- **–ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫** - –∫–∞–∂–¥—ã–π —Å–ø–ª–∏—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å
- **–í–∏–¥–µ–æ —Ä–∞–∑–Ω–æ–π –¥–ª–∏–Ω—ã** - —Ä–∞–∑–Ω–∞—è —Å—Ç–µ–ø–µ–Ω—å –∏—Å–∫–∞–∂–µ–Ω–∏—è
- **FPS > 10** - –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é:

### Streamlit:
```bash
cd /Users/nikita/Downloads/Sprint-Bot-main
python3 -m streamlit run app.py
```

**–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π FPS:**
- 2.5 fps ‚úÖ
- 7.3 fps ‚úÖ
- 10.5 fps ‚úÖ
- 15.8 fps ‚úÖ

–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ!

---

### CLI:
```bash
cd /Users/nikita/Downloads/Sprint-Bot-main

PYTHONPATH=$PWD python3 examples/run_local_video_analysis.py \
    --video –≤–∏–¥–µ–æ.mp4 \
    --fps 10.5 \
    --pool-length 25 \
    --output ./accurate_analysis
```

---

## üìà –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

### –í–∏–¥–µ–æ –º–∞—Å—Ç–µ—Ä–∞ —Å–ø–æ—Ä—Ç–∞ (26 —Å–µ–∫):

#### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (FPS 10 –≤–º–µ—Å—Ç–æ 10.5):
```json
{
  "summary": {
    "total_time_s": 30.0,  ‚Üê –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–≤–∏–¥–µ–æ 26—Å!)
    "average_speed_mps": 1.67,  ‚Üê –∑–∞–Ω–∏–∂–µ–Ω–∞
    "average_pace_per_100m": 60.0  ‚Üê –∑–∞–≤—ã—à–µ–Ω
  }
}
```

#### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (FPS 10.5 —Ç–æ—á–Ω—ã–π):
```json
{
  "summary": {
    "total_time_s": 26.67,  ‚Üê –ø—Ä–∞–≤–∏–ª—å–Ω–æ!
    "average_speed_mps": 1.88,  ‚Üê —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ
    "average_pace_per_100m": 53.2  ‚Üê –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ–º–ø
  }
}
```

**–†–∞–∑–Ω–∏—Ü–∞:** 6.8 —Å–µ–∫—É–Ω–¥ –Ω–∞ 100–º - –æ–≥—Ä–æ–º–Ω–∞—è!

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –°—Ç–∞—Ä—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º (—Å –æ—à–∏–±–∫–æ–π):
```python
fps = int(10.5)  # = 10
frame_interval = video_fps / fps  # 30 / 10 = 3.0
frame_interval = int(frame_interval)  # = 3

for frame_count in range(total_frames):
    if frame_count % 3 == 0:
        save_frame()
        
# –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π 3-–π –∫–∞–¥—Ä
# FPS: 30/3 = 10 (–Ω–µ 10.5!)
```

### –ù–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º (—Ç–æ—á–Ω—ã–π):
```python
fps = 10.5  # —Ç–æ—á–Ω—ã–π float
time_per_frame = 1.0 / fps  # = 0.0952—Å
next_save_time = 0.0

for frame_count in range(total_frames):
    current_time = frame_count / video_fps
    
    if current_time >= next_save_time:
        save_frame()
        next_save_time += time_per_frame
        
# –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ—á–Ω–æ —á–µ—Ä–µ–∑ 0.0952—Å
# FPS: ~10.5 (—Ç–æ—á–Ω–æ!)
```

---

## ‚úÖ –ß—Ç–æ —É–ª—É—á—à–∏–ª–æ—Å—å:

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| **–¢–æ—á–Ω–æ—Å—Ç—å FPS** | ¬±30% | ¬±0.5% | **60x –ª—É—á—à–µ** ‚úÖ |
| **–¢–æ—á–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏** | ¬±3 —Å–µ–∫ | ¬±0.1 —Å–µ–∫ | **30x –ª—É—á—à–µ** ‚úÖ |
| **–¢–æ—á–Ω–æ—Å—Ç—å —Å–∫–æ—Ä–æ—Å—Ç–∏** | ¬±10% | ¬±1% | **10x –ª—É—á—à–µ** ‚úÖ |
| **–¢–æ—á–Ω–æ—Å—Ç—å —Ç–µ–º–ø–∞** | ¬±6 —Å–µ–∫/100–º | ¬±0.5 —Å–µ–∫/100–º | **12x –ª—É—á—à–µ** ‚úÖ |

---

## üéâ –ò—Ç–æ–≥–æ:

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ FPS –±–æ–ª—å—à–µ –Ω–µ –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ int
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –†–∞—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ—á–Ω—ã–π (float frame_duration)
- ‚úÖ –°–∫–æ—Ä–æ—Å—Ç—å –∏ —Ç–µ–º–ø –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

**–†–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ:**
- ‚úÖ CLI (run_local_video_analysis.py)
- ‚úÖ Streamlit (app.py)
- ‚úÖ Frame extractor (frame_extractor.py)

**–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π FPS:**
- ‚úÖ –¶–µ–ª—ã–µ —á–∏—Å–ª–∞ (5, 10, 15)
- ‚úÖ –î—Ä–æ–±–Ω—ã–µ (2.5, 7.3, 10.5, 15.8)
- ‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ!

---

## üöÄ –ó–∞–ø—É—Å–∫–∞–π!

```bash
cd /Users/nikita/Downloads/Sprint-Bot-main
python3 -m streamlit run app.py
```

**–¢–µ–ø–µ—Ä—å —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Ç–µ–º–ø —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** üéØ‚è±Ô∏è

–ù–µ—Ç –∏—Å–∫–∞–∂–µ–Ω–∏–π –∏–∑-–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è FPS! ‚ú®
